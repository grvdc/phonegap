/**
 * Created by vpatel on 7/4/2016.
 */
app.controller('acknowledgementCtrl', function($rootScope,$ionicPopup,$scope,$stateParams,$state,SignatureService,EquipmentAssociateService) {
$rootScope.acknowledgementDetail ={};
$rootScope.acknowledgementDetail.signature = null;
$rootScope.acknowledgementDetail.certification_date = null;
$scope.equipmentList = EquipmentAssociateService.getEquipments();

$rootScope.acknowledgementDetail.signature =$scope.equipmentList[0].signature;
$rootScope.acknowledgementDetail.certification_date = new Date($scope.equipmentList[0].certification_date);


  if(SignatureService.getSignature() != null){

    $rootScope.acknowledgementDetail.signature = SignatureService.getSignature();
    $rootScope.acknowledgementDetail.certification_date = new Date();
    console.log($scope.acknowledgementDetail);
  }



$scope.goToConfirm = function(){
var confirmPopup = $ionicPopup.confirm({
        title: 'Terms & Conditions',
        template: '<p>I agree equipment and materials issued to me during my employment will be returned any time specified by my employer, either through the end of my employment or as such time my usage of the equipment is deemed unnecessary. Additionally, I understand I am required to store issued equipment safely and securely when kept at the project site or in my possession. Materials given to me for projects are to be returned to company stores when no longer necessary.</p><p>Employees are to discuss with the onsite project Certified Renovator or foremen how to identify materials to be returned. Discuss how to properly handle disposable products, hazardous substances, waste containing lead or other materials generated by the work.</p><p>Employees are responsible to take reasonable care of issued equipment and notify management of maintenance or safety issues. Project materials are to be stored safely, securely and protected from exposure.</p><p><ion-checkbox class="item-checkbox-left" >I agree to the terms & conditions</ion-checkbox></p>',
        buttons: [
          {
            text: 'Cancel',
            type: 'button-nagitive',
          },
          {
          text: 'Accept',
          type: 'button-positive',
          onTap: function() {
            $rootScope.teamRecord = 'save';
    console.log($scope.equipmentList)
    EquipmentAssociateService.setEquipments($scope.equipmentList);
    EquipmentAssociateService.setOldEquipments(angular.copy($scope.equipmentList));
    $state.go("menu.teamRecord",{memberId:$stateParams.memberId,projectId:$stateParams.projectId});
          }
        }
        ]
      });
//$scope.openConfirmBox = true;
}
$scope.memberId = $stateParams.memberId;
$scope.projectId = $stateParams.projectId;

  $scope.equipmentsTab = 'active';
  $scope.materialsTab = '';
  $scope.showEquipments = true;
  console.log($scope.showEquipments)
  $scope.selectTab = function(tab) {
  if(tab == 'equipments'){
  $scope.equipmentsTab = 'active';
  $scope.materialsTab = '';
  $scope.showEquipments = true;
  }else{
  $scope.equipmentsTab = '';
  $scope.materialsTab = 'active';
  $scope.showEquipments = false;
  }

  }








})
